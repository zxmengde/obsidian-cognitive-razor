# 快速发布指南

这是一个简化的发布指南，适合快速参考。详细说明请查看 [发布流程.md](发布流程.md)。

## 🚀 快速发布步骤

### 1️⃣ 准备（5 分钟）

```bash
# 更新版本号（选择一个）
npm version patch  # 1.0.0 -> 1.0.1 (bug 修复)
npm version minor  # 1.0.0 -> 1.1.0 (新功能)
npm version major  # 1.0.0 -> 2.0.0 (重大变更)

# 更新 CHANGELOG.md
# 手动编辑，添加新版本的更新说明
```

### 2️⃣ 测试（2 分钟）

```bash
# 运行所有测试
npm test

# 如果测试失败，修复后重新运行
```

### 3️⃣ 构建（1 分钟）

```bash
# 生产构建
npm run build

# 验证构建
npm run verify-release
```

### 4️⃣ 提交（2 分钟）

```bash
# 提交所有更改
git add .
git commit -m "chore: prepare release 1.0.0"

# 创建标签（不要加 'v' 前缀！）
git tag 1.0.0

# 推送
git push origin main
git push origin 1.0.0
```

### 5️⃣ 发布（5 分钟）

1. 访问 GitHub 仓库的 Releases 页面
2. 点击 "Create a new release"
3. 选择标签 `1.0.0`
4. 填写标题和说明
5. 上传三个文件：
   - `main.js`
   - `manifest.json`
   - `styles.css`
6. 点击 "Publish release"

## ✅ 发布检查清单

快速检查，确保不遗漏：

- [ ] 版本号已更新
- [ ] CHANGELOG.md 已更新
- [ ] 测试通过
- [ ] 构建成功
- [ ] 验证通过
- [ ] Git 提交
- [ ] Git 标签创建（无 'v' 前缀）
- [ ] 推送到 GitHub
- [ ] GitHub Release 创建
- [ ] 三个文件已上传

## ⚠️ 常见错误

### 错误 1：标签名称错误

❌ 错误：`git tag v1.0.0`  
✅ 正确：`git tag 1.0.0`

标签必须与 manifest.json 中的版本号完全一致，不要加 'v' 前缀。

### 错误 2：忘记上传文件

必须上传三个文件：
- main.js
- manifest.json
- styles.css

缺少任何一个都会导致安装失败。

### 错误 3：版本号不一致

确保以下文件中的版本号一致：
- package.json
- manifest.json
- versions.json

使用 `npm version` 命令可以自动更新这些文件。

### 错误 4：测试未通过就发布

始终在发布前运行 `npm test`，确保所有测试通过。

## 🔧 快速修复

### 如果发布后发现问题

1. **小问题**：发布补丁版本
   ```bash
   npm version patch
   npm run build
   # 重复发布步骤
   ```

2. **严重问题**：回滚发布
   ```bash
   # 删除 GitHub Release（在网页上操作）
   
   # 删除标签
   git tag -d 1.0.0
   git push origin :refs/tags/1.0.0
   
   # 修复问题后重新发布
   ```

## 📞 需要帮助？

- 详细流程：[发布流程.md](发布流程.md)
- 发布准备：[发布准备完成.md](发布准备完成.md)
- 完整指南：[RELEASE.md](../RELEASE.md)

---

**提示**：第一次发布可能需要 15-20 分钟，熟悉后只需 5-10 分钟。

# Cognitive Razor UI 预览指南

## 概述

本文档提供了 Cognitive Razor 插件 UI 组件的预览和测试指南。

## 查看 UI 组件

### 1. WorkbenchPanel（工作台面板）

**打开方式**：
- 命令面板：搜索 "Cognitive Razor: 打开工作台"
- 快捷键：`Ctrl/Cmd + Shift + N`
- 状态栏：点击 Cognitive Razor 图标 → "打开工作台"

**包含的区域**：
- **创建概念区域**：输入框和创建按钮
- **重复概念面板**：显示检测到的重复概念对
- **队列状态区域**：显示任务队列的统计信息
- **最近操作区域**：显示最近的操作历史

### 2. QueueView（任务队列视图）

**打开方式**：
- 命令面板：搜索 "Cognitive Razor: 查看任务队列"
- 快捷键：`Ctrl/Cmd + Shift + Q`
- 工作台：点击"查看详情"按钮

**功能**：
- 查看所有任务（等待中、执行中、已完成、失败）
- 按状态筛选任务
- 取消或重试任务
- 调整并发数

### 3. DiffView（差异预览视图）

**触发方式**：
- 增量改进笔记后自动弹出
- 合并重复概念时自动弹出

**功能**：
- 查看原始内容和新内容
- 逐项选择要应用的更改
- 并排对比视图
- 接受或放弃更改

### 4. StatusBadge（状态栏徽章）

**位置**：Obsidian 状态栏右侧

**显示信息**：
- 任务计数（等待中 + 执行中）
- 失败任务数
- 队列状态（运行中/已暂停）

**交互**：
- 点击显示快捷菜单
- 悬停显示详细信息

## 主题测试

### 测试亮色主题

1. 打开 Obsidian 设置
2. 外观 → 主题 → 选择亮色主题
3. 打开 Cognitive Razor 工作台
4. 验证所有组件的可读性和对比度

### 测试暗色主题

1. 打开 Obsidian 设置
2. 外观 → 主题 → 选择暗色主题
3. 打开 Cognitive Razor 工作台
4. 验证所有组件的可读性和对比度

### 主题切换测试

1. 打开工作台或队列视图
2. 使用快捷键切换主题（通常是 `Ctrl/Cmd + ,`）
3. 验证样式立即更新，无需刷新

## 响应式测试

### 桌面端测试

1. **全屏模式**：最大化 Obsidian 窗口
2. **分屏模式**：将工作台放在侧边栏
3. **小窗口**：缩小 Obsidian 窗口到最小宽度

### 移动端测试（如果支持）

1. 在移动设备上打开 Obsidian
2. 测试工作台的触摸交互
3. 验证响应式布局

## 可访问性测试

### 键盘导航

1. 使用 `Tab` 键在元素间导航
2. 使用 `Enter` 或 `Space` 激活按钮
3. 使用 `Esc` 关闭模态框

### 焦点指示器

1. 使用键盘导航
2. 验证每个可交互元素都有清晰的焦点指示器
3. 焦点指示器应该是蓝色边框

### 屏幕阅读器（可选）

1. 启用屏幕阅读器（如 NVDA、JAWS、VoiceOver）
2. 导航到各个 UI 组件
3. 验证所有元素都有适当的标签

## 样式验证清单

### WorkbenchPanel

- [ ] 创建概念输入框样式正确
- [ ] 按钮有悬停效果
- [ ] 重复概念卡片显示正确
- [ ] 队列统计网格布局正确
- [ ] 最近操作列表可滚动
- [ ] 空状态提示显示正确

### QueueView

- [ ] 过滤按钮有激活状态
- [ ] 任务卡片按状态着色（左边框）
- [ ] 任务元数据显示清晰
- [ ] 错误信息有红色背景
- [ ] 操作按钮对齐正确
- [ ] 空状态提示居中显示

### DiffView

- [ ] 标签页切换正常
- [ ] 差异项有颜色标识（新增/删除/修改）
- [ ] 复选框可正常选择
- [ ] 并排视图布局正确
- [ ] 代码块使用等宽字体
- [ ] 操作按钮对齐正确

### StatusBadge

- [ ] 图标显示正确
- [ ] 计数徽章有颜色区分
- [ ] 悬停有背景高亮
- [ ] 点击显示菜单
- [ ] 暂停指示器有动画

## 常见样式问题

### 问题：样式未加载

**症状**：UI 组件没有样式，显示为纯 HTML

**解决方案**：
1. 确认 `styles.css` 在插件根目录
2. 重新加载 Obsidian（`Ctrl/Cmd + R`）
3. 检查开发者工具的控制台是否有错误

### 问题：暗色主题不生效

**症状**：切换到暗色主题后，插件仍显示亮色样式

**解决方案**：
1. 确认 Obsidian 已应用暗色主题
2. 检查 `body` 元素是否有 `.theme-dark` 类
3. 清除浏览器缓存并重新加载

### 问题：响应式布局错乱

**症状**：在小屏幕上元素重叠或溢出

**解决方案**：
1. 检查窗口宽度是否小于 768px
2. 验证媒体查询是否生效
3. 检查是否有自定义 CSS 片段冲突

### 问题：按钮无法点击

**症状**：按钮看起来正常但点击无响应

**解决方案**：
1. 这是 JavaScript 问题，不是样式问题
2. 检查浏览器控制台的错误信息
3. 验证事件监听器是否正确绑定

## 性能检查

### 渲染性能

1. 打开浏览器开发者工具
2. 切换到 Performance 标签
3. 录制打开工作台的过程
4. 检查是否有长时间的布局重排或重绘

### 动画性能

1. 观察任务卡片的淡入动画
2. 检查状态徽章的脉冲动画
3. 验证动画流畅，无卡顿

### 内存使用

1. 打开 Memory 标签
2. 拍摄堆快照
3. 检查 CSS 相关的内存占用

## 截图和文档

建议为以下场景创建截图：

1. **工作台 - 亮色主题**
2. **工作台 - 暗色主题**
3. **队列视图 - 有任务**
4. **队列视图 - 空状态**
5. **差异预览 - 并排视图**
6. **状态栏徽章 - 不同状态**
7. **响应式布局 - 小屏幕**
8. **焦点指示器 - 键盘导航**

## 反馈和改进

如果发现样式问题，请记录：

1. **问题描述**：具体的视觉问题
2. **重现步骤**：如何触发问题
3. **环境信息**：
   - Obsidian 版本
   - 操作系统
   - 主题（亮色/暗色）
   - 屏幕尺寸
4. **截图**：问题的视觉证据
5. **期望行为**：应该如何显示

## 下一步

完成样式验证后，可以继续：

1. 测试完整的用户流程
2. 编写端到端集成测试
3. 准备插件发布
4. 编写用户文档

## 参考

- [Obsidian 开发者工具](https://docs.obsidian.md/Plugins/Getting+started/Development+workflow)
- [Chrome DevTools](https://developer.chrome.com/docs/devtools/)
- [CSS 调试技巧](https://css-tricks.com/debugging-css/)
